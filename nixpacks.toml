# Nixpacks configuration for Dokploy deployment
# Sirve archivos est√°ticos desde dist/ en puerto 80

providers = ["node"]

[phases.setup]
nixPkgs = ["nodejs_18", "caddy"]

[phases.install]
cmds = ["npm ci --include=dev"]

[phases.build]
cmds = ["npm run build", "cp .nixpacks/Caddyfile /app/Caddyfile"]

[start]
cmd = "caddy run --config /app/Caddyfile --adapter caddyfile"
